<!--
Copyright 2017 Next Century Corporation

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../image-gallery/image-gallery.html">
<link rel="import" href="../paginated-list/paginated-list.html">

<!--
A Polymer Element showing an image-gallery element in a paginated-list element.

### Example
```html
<paginated-image-gallery
  image-items="[[list]]"
  total-items="[[size]]"
  loading="[[loading]]"
  page="{{page}}">
</paginated-image-gallery>
```

### Styling

`<paginated-image-gallery>` provides the following custom properties and mixins for styling:

Custom property                            | Description                                  | Default
-------------------------------------------|----------------------------------------------|--------
`--paginated-image-gallery-hovering-color` | The background color of the hovering images. | none
`--paginated-image-gallery-max-height`     | Maximum height of the gallery                | 160px
`--paginated-image-gallery-selected-color` | The background color of the selected images. | none

@demo demo/index.html
-->

<dom-module id="paginated-image-gallery">
  <template>
    <style>
      :host {
        display: block;
      }

      paginated-list {
        /* By default, the height of 1 row of images. */
        --paginated-list-max-height: var(--paginated-image-gallery-max-height, 160px);
      }

      image-gallery {
        --image-hovering-color: var(--paginated-image-gallery-hovering-color);
        --image-selected-color: var(--paginated-image-gallery-selected-color);
      }
    </style>

    <paginated-list
      loading="[[loading]]"
      load-type="[[loadType]]"
      items="[[imageItems]]"
      total-items="[[totalItems]]"
      page="{{page}}"
      page-size="[[pageSize]]"
      shown-items="{{shownItems}}">

      <image-gallery
        images="[[shownItems]]"
        image-id-property="[[imageIdProperty]]"
        image-link-property="[[imageLinkProperty]]"
        image-source-property="[[imageSourceProperty]]"
        small-image-style-class="[[smallImageStyleClass]]"
        large-image-style-class="[[largeImageStyleClass]]"
        new-tab="[[newTab]]"
        selected="[[selected]]"
        hovering="{{hovering}}">
      </image-gallery>
    </paginated-list>
  </template>

  <script>
  (function() {
    'use strict';

    Polymer({
      is: 'paginated-image-gallery',

      properties: {
        /**
         * (Required)
         *
         * The images to show in this list that are reset for each new page.
         *
         * @type {Array}
         */
        imageItems: {
          type: Array
        },

        /**
         * (Required)
         *
         * The total number of images for all pages.
         *
         * @type {Number}
         */
        totalItems: {
          type: Number
        },

        /**
         * (Optional)
         *
         * The property of the image objects for their unique IDs.
         *
         * @type {String}
         * @default 'id'
         */
        imageIdProperty: {
          type: String,
          value: 'id'
        },

        /**
         * (Optional)
         *
         * The property of the image objects for their link URL to open information within the application.
         *
         * @type {String}
         * @default 'link'
         */
        imageLinkProperty: {
          type: String,
          value: 'link'
        },

        /**
         * (Optional)
         *
         * The property of the image objects for their source URL.
         *
         * @type {String}
         * @default 'source'
         */
        imageSourceProperty: {
          type: String,
          value: 'source'
        },

        /**
         * (Optional)
         *
         * The style class for all the images in the gallery.
         *
         * @type {String}
         * @default ''
         */
        smallImageStyleClass: {
          type: String,
          value: ''
        },

        /**
         * (Optional)
         *
         * The style class for any image in a popup.
         *
         * @type {String}
         * @default ''
         */
        largeImageStyleClass: {
          type: String,
          value: ''
        },

        /**
         * (Optional)
         *
         * The type of items shown in the Loading and Show More text.
         *
         * @type {String}
         * @default ''
         */
        loadType: {
          type: String,
          value: ''
        },

        /**
         * (Optional)
         *
         * Whether a query is running.
         *
         * @type {Boolean}
         * @default false
         */
        loading: {
          notify: true,
          type: Boolean,
          value: false
        },

        /**
         * (Optional)
         *
         * Whether to open a link in a new tab.
         *
         * @type {Boolean}
         * @default false
         */
        newTab: {
          type: Boolean,
          value: false
        },

        /**
         * (Optional)
         *
         * The page size (or 0 for no page size).
         *
         * @type {Number}
         * @default 0
         */
        pageSize: {
          type: Number,
          value: 0
        },

        /**
         * (Optional)
         *
         * The list of selected image IDs.
         *
         * @type {Array}
         * @default []
         */
        selected: {
          type: Array,
          value: function() {
            return [];
          }
        },

        /**
         * (Output)
         *
         * The list of image IDs targeted by a hover event.
         *
         * @type {Array}
         * @default []
         */
        hovering: {
          notify: true,
          type: Array,
          value: function() {
            return [];
          }
        },

        /**
         * (Optional|Output)
         *
         * The current page.
         *
         * @type {Number}
         * @default 1
         */
        page: {
          notify: true,
          type: Number,
          value: 1
        },

        /**
         * (Output)
         *
         * The images shown in this list that are taken from the input image-items.
         *
         * @type {Array}
         */
        shownItems: {
          notify: true,
          type: Array
        }
      }
    });
  })();
  </script>
</dom-module>
